<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-label/iron-label.html">
<link rel="import" href="../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">

<link rel="import" href="shared-styles.html">

<dom-module id="rt-options">
  <template>
  <style is='custom-style' include="shared-styles iron-flex-factors iron-flex-alignment iron-positioning ">
      :host {
        display: block;
        @apply(--layout-vertical);
        padding: 10px;
      }
      iron-label{
        @apply(--layout-horizontal);
        @apply(--layout-center);
      }
      paper-input,span{
        @apply(--layout-flex)
      }
    </style>

    <h2>Bad Apple Study Options</h2>
    <iron-label>
      <span>
        Number of Nodes:
      </span>
      <paper-input label='Number of Nodes' value='[[inputs.numNodes]]' readonly></paper-input>
    </iron-label>
    <iron-label>
      <span>
        List of Unique Nodes
      </span>
      <paper-input label='List of Unique Nodes' value='[[inputs.nodeList]]' readonly></paper-input>
    </iron-label>
    <iron-label>
      <span>
        Relationship Focus Group
      </span>
      <paper-input label='Relationship Focus Group' value='{{focusGroup}}'></paper-input>
    </iron-label>
    <iron-label>
      <span>
        Bad Apple:
      </span>
      <paper-input label='Bad Apple' value='{{targetNode}}'></paper-input>
    </iron-label>
    <iron-label>
      <span>
        Graph Type:
      </span>
      <paper-radio-group selected='{{graphType}}'class='layout vertical center'>
        <paper-radio-button name='full'>Full Graph</paper-radio-button>
        <paper-radio-button name='relationship'>Relationship Focus Group</paper-radio-button>
        <paper-radio-button name='badapple'>Bad Apple</paper-radio-button>
      </paper-radio-group>
    </iron-label>

  </template>

  <script>
    Polymer({
      is: 'rt-options',
      properties: {
        name: {notify: true, value: 'rt-options'},
        inputs: {notify: true},
        results: {notify: true, computed: '_results(focusGroup,targetNode,graphType,inputs)'},
        graphType: {notify: true, value: 'badapple'},
        targetNode: {notify: true, value: 'a'},
        focusGroup: {notify: true, value:'a,b,c,d,e'},
      },
      _results: function(focusGroup,targetNode,graphType,inputs){
        var ret = this.inputs;
        ret.graphType = graphType;
        ret.focusGroup = focusGroup;
        ret.targetNode = targetNode;
        ret.graphData.targetNode = [{data:{id:ret.targetNode}}];
        ret.graphData.targetEdges =[];
        console.log('compiling target edges')
        inputs.graphData.edges.forEach(function(el){
          if(el.data.id.indexOf(ret.targetNode) != -1){
            console.log(el)
            ret.graphData.targetEdges.push(el);
          }
        })
        return ret;
      }
    });
  </script>
</dom-module>
